{"tests":[{"good":{"type":"js","content":"function wrapItems(items) {\n  const envelopes = [];\n  let counter = 0;\n  for (const item of items) {\n    const envelope = {\n      id: counter++,\n      item,\n    };\n    envelopes.push(envelope);\n  }\n  return envelopes;\n}\n\nmodule.exports = wrapItems;"},"bad":{"type":"js","content":"function wrapItems(items) {\n  let envelopes = [];\n  let counter = 0;\n  for (let item of items) {\n    let envelope = {\n      id: counter++,\n      item,\n    };\n    envelopes.push(envelope);\n  }\n  return envelopes;\n}\n\nmodule.exports = wrapItems;"}},{"good":{"type":"js","content":"function createFibonacci() {\n  const memo = new Map([[0, 0], [1, 1]]);\n\n  return function fibonacci(n) {\n    if (!memo.has(n)) {\n      memo.set(n, fibonacci(n - 1) + fibonacci(n - 2));\n    }\n    return memo.get(n);\n  };\n}\n\nmodule.exports = createFibonacci();"},"bad":{"type":"js","content":"function fibonacci(n) {\n  if (n < 2) {\n    return n;\n  }\n  return fibonacci(n - 1) + fibonacci(n - 2);\n}\n\nmodule.exports = fibonacci;"}},{"good":{"type":"js","content":"async function loadData(api) {\n  const foo = api.getFoo();\n  const bar = api.getBar();\n  return {\n    foo: await foo,\n    bar: await bar,\n  };\n}\n\nmodule.exports = loadData;"},"bad":{"type":"js","content":"async function loadData(api) {\n  const foo = await api.getFoo();\n  const bar = await api.getBar();\n  return { foo, bar };\n}\n\nmodule.exports = loadData;"}},{"good":{"type":"js","content":"function uniqify(numbers) {\n  const unique = [];\n  const mem = Object.create(null);\n  for (const number of numbers) {\n    if (!mem[number]) {\n      unique.push(number);\n      mem[number] = true;\n    }\n  }\n  return unique;\n}\n\nmodule.exports = uniqify;"},"bad":{"type":"js","content":"function uniqify(numbers) {\n  const unique = [];\n  for (const number of numbers) {\n    if (!unique.includes(number)) {\n      unique.push(number);\n    }\n  }\n  return unique;\n}\n\nmodule.exports = uniqify;"}}]}